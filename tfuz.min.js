/**
 * TFUZ
 * (c) 2022 Bret Lowry
 * @license MIT
 * @description TFUZ - A tiny, plugin extendable JavaScript utility library with a JQuery-like syntax!
 * @author Bret Lowry <bretgeek@gmail.com>
 * @constructor
 * @return object
 */
function Tfuz(){const e={append:v,appendTo:q,prependTo:L,each:P,select:B,ready:n,filterString:V,css:S,html:x,_text:A,fn:z,use:z,delay:M,runq:w,copyright:o,isrun:false,on:H,off:E,trigger:O,bret:true,observers:{},observe:b,unobserve:g,getobservers:y,scroll:i,grab:R,attr:d,removeAttr:h,addClass:a,removeClass:c,toggle:u,rpx:p,cs:m,isString:k,isFunction:D,isObject:$,isArray:F,isElement:I,isNumber:N,isEmpty:j,createNode:l,registeredComponents:registeredComponents={},useShortTags:false,render:s};let t=false;(function e(){if(document.readyState!="loading"){t=true}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",(function(){t=true}))}else{document.attachEvent("onreadystatechange",(function(){if(document.readyState!="loading"){t=true}}))}})();function n(e,n=3e3){let r;let s;let i=1;r=setInterval(()=>{if(t){clearInterval(r);clearTimeout(s);if(e&&D(e)&&i<=1){try{e();i++}catch(e){console.error(e)}}else{return true}}},6);s=setTimeout(()=>{t=true},n)}function r(e,{e:t=this}={}){t.style.cssText=e;return this}function s({el:t="div",name:n=false,evt:r="click",to:s="body",fn:i=false,template:o="Hello",css:f=false}={}){let l={el:t,evt:r,to:s,fn:i,template:o,css:f,name:n};let u;if(D(t)){u=t();for(let e in l){if(!u[e]){u[e]=l[e]}for(var a in u){l[a]=u[a]}}}if(l.name){console.log("autoparse all templates from now on for "+l.name);let t=l.name;e.registeredComponents[t]=e.registeredComponents[t]||function(n=false){if(D(n)){e.each({sel:"."+l.name,fn:function(e){n(e)}});return}if(k(n)){e.each({sel:"."+l.name,fn:function(e){e.html(n)}});return}let r=e.createNode(l.el);r.className=t;r.addClass(t);r.html(l.template);return r.outerHTML}}for(var a in e.registeredComponents){if(!e["$"+a]){e["$"+a]=e.registeredComponents[a]}}for(const[t,n]of Object.entries(e.registeredComponents)){let t=/{{(.*?)}}/g;if(e.useShortTags){t=/<(.*?)\/>/g}const r=o.matchAll(t);const s=Array.from(r);if(s.length){l.template=l.template.replace(t,n())}}function c(t,n=false){let r;if(!I(t.el)){r=e.createNode(t.el,{add:t.to});if(t.name){r.className=t.name;r.addClass(t.name)}}else{r=t.el}if(D(t.fn)){t.fn(r)}if(k(t.css)){r.css(t.css)}r.html(t.template);return r}return c(l)}function i(e){if(D(e)){window.addEventListener("scroll",e,true)}return this}function o(){console.log("COPYRIGHT Bret Lowry 6/6/2022");return this}function f(e){return e.nodeName||false}function l(e=null,{e:t=this,add:n=false,prepend:r=false}={}){let s=false;if(e){let i=e;i=i.replace(/ /g,"");i=i.trim();s=document.createElement(i);G(s);if(n){if(f(t)){if(r){t.prepend(s)}else{t.appendChild(s)}}else{if(r){document.body.prepend(s)}else{document.body.appendChild(s);return s}}}else{}}return s}function u(e=false,{e:t=this}={}){if(e){const n=e.split(",");for(let e of n){e=e.trim();e=e.replace(/\./g,"");if(t.classList.contains(e)){t.removeClass(e)}else{t.addClass(e)}}}return this}function a(e,t=false,{e:n=this}={}){if(!t){n.classList.add(e)}else{n.classList.remove(e)}return this}function c(e,{e:t=this}={}){t.addClass(e,true);return this}function d(e,t=false,n=false,{e:r=this}={}){if(e&&k(e)){if(n){r.removeAttribute(e);return this}if(k(t)||typeof t==="number"){r.setAttribute(e,t);return this}if(!t){const t=r.getAttribute(e);return t}}}function h(e,{e:t=this}={}){d(e,{s:false,r:true});return this}function p(e,{e:t=this}={}){e=e.toString();e=e.replace(/px/g,"");e=e.replace(/%/g,"");e=e.replace(/em/g,"");e=Math.round(Number(e));return e}function m(e,t=true,{e:n=this}={}){if(e=="rotate"){return getCurrentRotation(n)}if(e==="position"){return n.style.position}if(e==="offsetLeft"){return n.offsetLeft}if(e==="offsetTop"){return n.offsetTop}if(e==="offsetHeight"){return n.offsetHeight}if(e==="offsetWidth"){return n.offsetHeight}let r=getComputedStyle(n).getPropertyValue(e)||null;if(t&&N(r)){try{r=p(r)}catch(e){console.error(e)}}return r}function b(e,{name:t="name",delay:n=10,child:r=true,attr:s=true,subtree:i=false,attrs:o=["none"],chardat:f=false,attrsOV:l=false,chardatOV:u=false,e:a=this}){if(typeof e!=="function"){return}const c={childList:r,attributes:s,characterData:f,subtree:i,attributeFilter:o,attributeOldValue:l,characterDataOldValue:u};const d=new MutationObserver((function(t){t.forEach((function(t){if(t.type==="attributes"){if(o[0]!=="none"){a.delay({time:n,fn:()=>{e(a)}})}}else{if(o[0]==="none"){if(t.type==="childList"||t.type==="subtree"||t.type==="characterData"){a.delay({time:n,fn:()=>{e(a)}})}}}}))}));if(a.observers[t]){a.observers[t].disconnect();delete a.observers[t]}a.observers[t]=d;a.observers[t].observe(a,c);return this}function g(e="name",{e:t=this}={}){if(e==="all"){const e=Object.keys(t.observers);for(const n of e){delete t.observers[n];n.disconnect()}}else{if(t.observers[e]){t.observers[e].disconnect();delete t.observers[e]}}return this}function y({e:e=this}={}){const t=Object.keys(e.observers);return t}function v(e,{e:t=this}={}){if(I(e)){t.appendChild(e)}else{let n=t.innerHTML;t.innerHTML=`${n}${e}`}return this}function T(e,{e:t=this}={}){let n=t.innerHTML;t.innerHTML="";if(I(e)){t.appendChild(e);t.append(n);t.innerHTML=t.innerHTML.trim()}else{t.innerHTML=`${e}${n}`}return this}function L(e,{e:t=this}={}){if(!e){return this}C(e,true,{e:t});return this}function q(e,{e:t=this}={}){if(!e){return this}C(e,false,{e:t});return this}function C(e,t=false,{e:n=this}={}){if(k(e)){const r=document.querySelectorAll(e)[0];if(!r){return this}if(t){r.prepend(n)}else{r.append(n)}}if(I(e)){if(t){e.prepend(n)}else{e.append(n)}return this}}function w({e:e=this}={}){let t;if(!e.isrun){e.isrun=true;if(e.q){t=e.q.shift();if(D(t)){t(e);w()}}}return null}function M({e:e=this,time:t=1e3,iterate:n=false,autocalc:r=false,step:s=1,duration:i=false,fn:o=false,fps:f=false,force:l=false},u={}){var a=e;e.q=e.q||[];if(N(f)){u["fps"]=f;f=Math.round(1e3/f);if(r&&u.endTime){const e=(new Date).getTime();let t=u.endTime-e;t=Math.round(t/1e3);let r=f*t;r=Math.round(r/100)*100;u["itercalc"]=r;n=r}}if(!n){n=1}u["iterate"]=n;let c=0;let d=n;if(l){e.isrun=false}for(let r=0;r<n;r++){let r;const i=function(e){const i=new Date;const l=i.getTime()+t;if(f){r=requestInterval((function(){if(D(o)){c+=s;c=+c.toFixed(2);d=d-1;u["step"]=c;u["iteration"]=n-d;u["iterationsLeft"]=n-(n-d);u["frame"]=n-d;u["el"]=e;u["kill"]=function(){e.q.splice(0,n-(n-d));e.isrun=false};e.kill=u["kill"];o(e,u)}e.isrun=false;e.runq=e.runq.bind(e);e.runq({e:e});e.isrun=false;r.clear()}),f)}else{r=requestInterval((function(t){const i=new Date;if(i.getTime()>=l){if(D(o)){c+=s;c=+c.toFixed(2);d=d-1;u["step"]=c;u["iteration"]=n-d;u["iterationsLeft"]=n-(n-d);u["el"]=e;u["kill"]=function(){e.q.splice(0,n-(n-d));e.isrun=false};e.kill=u["kill"];o(e,u)}e.isrun=false;e.runq=e.runq.bind(e);e.runq({e:e});e.isrun=false;r.clear()}}),t)}};e.q.push(i)}if(e.q.length){e.runq=e.runq.bind(e);e.runq({e:e})}return this}function H(e="mousedown",t,n=false,r=this){let s=n;if(typeof n==="boolean"){if(n){s={capture:true}}else{s={capture:false}}}const i=e.split(",");for(let e of i){e=e.trim();r.addEventListener(e,t,s)}return this}function E(e="mousedown",t,n=false,r=this){const s=r;let i=n;if(typeof n==="boolean"){if(n){i={capture:true}}else{i={capture:false}}}const o=e.split(",");for(const e of o){s.removeEventListener(e.trim(),t,i)}return this}function O(e,{e:t=this}={}){const n=t;const r=new Event(e);n.dispatchEvent(r,{bubbles:true,cancelable:true});return this}function A(e,{e:t=this}={}){let n=t.textContent;if(!e||e.length<1){return n}t.innerHTML=e;return this}function x(e,{e:t=this}={}){let n=t.innerHTML;if(!e||e.length<1){return n}t.innerHTML=e;return this}function S(e,{add:t=true,e:n=this}={}){if(!t){n.style.cssText=e}else{n.style.cssText=n.style.cssText+e}return this}window.requestInterval=function(e,t){const n=Date.now;const r=window.requestAnimationFrame;let s=n();let i;var o=function(){n()-s<t||(s+=t,e());i||r(o)};r(o);return{clear:function(){i=1},start:function(){n()}}};function k(e){return typeof e==="string"}function N(e){return/^-{0,1}\d+$/.test(e)}function j(e){if(Object.keys(e).length===0&&e.constructor===Object){return true}else{return false}}function D(e){return typeof e==="function"}function $(e){if(Object.prototype.toString.call(e).slice(8,-1)==="Object"){return true}else{return false}}function I(e){return e.nodeType==1}function F(e){if(Array.isArray(e)){return true}else{return false}}function V(e,t=false){e=e.replace(/[^\x20-\x7E]+/g,"");if(t){e=e.replace(/[^a-z0-9-#]+|\s+/gim,"")}e=e.trim();return e}function z({e:t=this,name:n="",fn:r=(()=>{}),vdata:s={},concat:i=false}={}){e[n]=r;return this}function P({e:e=this,sel:t=null,fn:n=(()=>{})}={}){if(!f(e)){e=document}if(t){const r=t.split(",");for(let t of r){t=t.trim();let r=e.querySelectorAll(t);r.forEach(e=>{G(e);n(e)})}}return this}function R(e=null,{e:t=this,first:n=true,all:r=false,fn:s=(()=>{})}={}){if(r){n=false}let i=t.select({e:t,first:n,sel:e,fn:s});return i}function B({e:e=this,first:t=false,sel:n=null,fn:r=(()=>{})}={}){if(!f(e)){e=document}let s=[];if(n){const t=n.split(",");for(let n of t){n=n.trim();let t=e.querySelectorAll(n);t.forEach(e=>{s.push(e);G(e);r(e)})}}if(s.length){if(t&&s.length){return s[0]}else{return s}}else{return false}}function G(t){for(const n in e){const r=n;if(D(e[n])){if(t.nodeName!=="#document"){t[r]=t[r]||e[n].bind(t)}}else{t[r]=t[r]||e[n]}}}return e}const tfuz=new Tfuz;
